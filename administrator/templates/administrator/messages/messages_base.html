{% extends "administrator/admin_base.html" %}
{%block content%}
{% load static %}
    <link rel="stylesheet" href="{% static 'styles/messages.css' %}">
        <!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    
    
        <!-- char-area -->
        <section class="message-area" style="margin: -80px;">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="chat-area">
                            <!-- chatlist -->
                            <div class="chatlist">
                                <div class="modal-dialog-scrollable">
                                    <div class="modal-content">
                                        <div class="chat-header">
                                            <div class="msg-search">
                                                <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="Search" aria-label="search">
                                                <a class="add" href="#"><img class="img-fluid" src="https://mehedihtml.com/chatbox/assets/img/add.svg" alt="add"></a>
                                            </div>
    
                                            <ul class="nav nav-tabs" id="myTab" role="tablist">
                                                <li class="nav-item" role="presentation">
                                                    <button class="nav-link active" id="Open-tab" data-bs-toggle="tab" data-bs-target="#Open" type="button" role="tab" aria-controls="Open" aria-selected="true">Open</button>
                                                </li>
                                                <li class="nav-item" role="presentation">
                                                    <button class="nav-link" id="Closed-tab" data-bs-toggle="tab" data-bs-target="#Closed" type="button" role="tab" aria-controls="Closed" aria-selected="false">Closed</button>
                                                </li>
                                            </ul>
                                        </div>
    
                                        <div class="modal-body">
                                            <!-- chat-list -->
                                            <div class="chat-lists">
                                                <div class="tab-content" id="myTabContent">
                                                    <div class="tab-pane fade show active" id="Open" role="tabpanel" aria-labelledby="Open-tab">
                                                        <!-- chat-list -->
                                                        {% for chat,a in zipped %}
                                                        {% if chat.groups.all.0.name == 'Reception' %}
                                                        <div class="chat-list">
                                                            <a href="{% url 'adminmessagelist' chat.id %}" class="d-flex align-items-center">
                                                                <div class="flex-shrink-0">
                                                                    {% if chat.receptionprofile.profile_picture.url != None%}
                                                                    <img src="{{ chat.receptionprofile.profile_picture.url }}" alt="..." class="user-img"> 
                                                                    {% else %}
                                                                    <img src="https://bootstrapious.com/i/snippets/sn-v-nav/avatar.png" alt="..." class="user-img">
                                                                    {% endif %}
                                                                    
                                                                </div>
                                                                <div class="flex-grow-1 ms-3">
                                                                    <h3>{{chat.receptionprofile.first_name}} {{chat.receptionprofile.last_name}}</h3>
                                                                    <p>Reception</p>
                                                                    
                                                                </div>
                                                                {% if a != 0 %}
                                                                <div class= 'notification-badge'>{{a}}</div>
                                                                {% endif %}
                                                            </a>
                                                        
                                                        </div>
                                                        {% endif %}
                                                        {% if chat.groups.all.0.name == 'Cashier' %}
                                                        <div class="chat-list">
                                                            <a href="{% url 'adminmessagelist' chat.id %}" class="d-flex align-items-center">
                                                                <div class="flex-shrink-0">
                                                                    {% if chat.cashierprofile.profile_picture.url != None%}
                                                                    <img src="{{ chat.cashierprofile.profile_picture.url }}" alt="..." class="user-img"> 
                                                                    {% else %}
                                                                    <img src="https://bootstrapious.com/i/snippets/sn-v-nav/avatar.png" alt="..." class="user-img">
                                                                    {% endif %}
                                                                    
                                                                </div>
                                                                <div class="flex-grow-1 ms-3">
                                                                    <h3>{{chat.cashierprofile.first_name}} {{chat.cashierprofile.last_name}}</h3>
                                                                    <p>Cashier</p>
                                                                </div>
                                                                {% if a != 0 %}
                                                                <div class= 'notification-badge'>{{a}}</div>
                                                                {% endif %}
                                                            </a>
                                                        </div>
                                                        {% endif %}
                                                        {% if chat.groups.all.0.name == 'Nurse' %}
                                                        <div class="chat-list">
                                                            <a href="{% url 'adminmessagelist' chat.id %}" class="d-flex align-items-center">
                                                                <div class="flex-shrink-0">
                                                                    {% if chat.nurseprofile.profile_picture.url != None%}
                                                                    <img src="{{ chat.nurseprofile.profile_picture.url }}" alt="..." class="user-img"> 
                                                                    {% else %}
                                                                    <img src="https://bootstrapious.com/i/snippets/sn-v-nav/avatar.png" alt="..." class="user-img">
                                                                    {% endif %}
                                                                    
                                                                </div>
                                                                <div class="flex-grow-1 ms-3">
                                                                    <h3>{{chat.nurseprofile.first_name}} {{chat.nurseprofile.last_name}}</h3>
                                                                    <p>Nurse</p>
                                                                </div>
                                                                {% if a != 0 %}
                                                                <div class= 'notification-badge'>{{a}}</div>
                                                                {% endif %}
                                                            </a>
                                                        </div>
                                                        {% endif %}
                                                        {% if chat.groups.all.0.name == 'Doctor' %}
                                                        <div class="chat-list">
                                                            <a href="{% url 'adminmessagelist' chat.id %}" class="d-flex align-items-center">
                                                                <div class="flex-shrink-0">
                                                                    {% if chat.doctorprofile.profile_picture.url != None%}
                                                                    <img src="{{ chat.doctorprofile.profile_picture.url }}" alt="..." class="user-img"> 
                                                                    {% else %}
                                                                    <img src="https://bootstrapious.com/i/snippets/sn-v-nav/avatar.png" alt="..." class="user-img">
                                                                    {% endif %}
                                                                    
                                                                </div>
                                                                <div class="flex-grow-1 ms-3">
                                                                    <h3>{{chat.doctorprofile.first_name}} {{chat.doctorprofile.last_name}}</h3>
                                                                    <p>Doctor</p>
                                                                </div>
                                                                {% if a != 0 %}
                                                                <div class= 'notification-badge'>{{a}}</div>
                                                                {% endif %}
                                                            </a>
                                                        </div>
                                                        {% endif %}
                                                        {% if chat.groups.all.0.name == 'Pharmacist' %}
                                                        <div class="chat-list">
                                                            <a href="{% url 'adminmessagelist' chat.id %}" class="d-flex align-items-center">
                                                                <div class="flex-shrink-0">
                                                                    {% if chat.pharmacistprofile.profile_picture.url != None%}
                                                                    <img src="{{ chat.pharmacistprofile.profile_picture.url }}" alt="..." class="user-img"> 
                                                                    {% else %}
                                                                    <img src="https://bootstrapious.com/i/snippets/sn-v-nav/avatar.png" alt="..." class="user-img">
                                                                    {% endif %}
                                                                    
                                                                </div>
                                                                <div class="flex-grow-1 ms-3">
                                                                    <h3>{{chat.pharmacistprofile.first_name}} {{chat.pharmacistprofile.last_name}}</h3>
                                                                    <p>Pharmacist</p>
                                                                </div>
                                                                {% if a != 0 %}
                                                                <div class= 'notification-badge'>{{a}}</div>
                                                                {% endif %}
                                                            </a>
                                                        </div>
                                                        {% endif %}
                                                        {% if chat.groups.all.0.name == 'Radiologist' %}
                                                        <div class="chat-list">
                                                            <a href="{% url 'adminmessagelist' chat.id %}" class="d-flex align-items-center">
                                                                <div class="flex-shrink-0">
                                                                    {% if chat.radiologistprofile.profile_picture.url != None%}
                                                                    <img src="{{ chat.radiologistprofile.profile_picture.url }}" alt="..." class="user-img"> 
                                                                    {% else %}
                                                                    <img src="https://bootstrapious.com/i/snippets/sn-v-nav/avatar.png" alt="..." class="user-img">
                                                                    {% endif %}
                                                                    
                                                                </div>
                                                                <div class="flex-grow-1 ms-3">
                                                                    <h3>{{chat.radiologistprofile.first_name}} {{chat.radiologistprofile.last_name}}</h3>
                                                                    <p>Radiologist</p>
                                                                </div>
                                                                {% if a != 0 %}
                                                                <div class= 'notification-badge'>{{a}}</div>
                                                                {% endif %}
                                                            </a>
                                                        </div>
                                                        {% endif %}
                                                        {% if chat.groups.all.0.name == 'Lab' %}
                                                        <div class="chat-list">
                                                            <a href="{% url 'adminmessagelist' chat.id %}" class="d-flex align-items-center">
                                                                <div class="flex-shrink-0">
                                                                    {% if chat.labtechnicianprofile.profile_picture.url != None%}
                                                                    <img src="{{ chat.labtechnicianprofile.profile_picture.url }}" alt="..." class="user-img"> 
                                                                    {% else %}
                                                                    <img src="https://bootstrapious.com/i/snippets/sn-v-nav/avatar.png" alt="..." class="user-img">
                                                                    {% endif %}
                                                                    
                                                                </div>
                                                                <div class="flex-grow-1 ms-3">
                                                                    <h3>{{chat.labtechnicianprofile.first_name}} {{chat.labtechnicianprofile.last_name}}</h3>
                                                                    <p>Lab Technician</p>
                                                                </div>
                                                                {% if a != 0 %}
                                                                <div class= 'notification-badge'>{{a}}</div>
                                                                {% endif %}
                                                            </a>
                                                        </div>
                                                        {% endif %}
                                                        {% if chat.groups.all.0.name == 'Materialmanager' %}
                                                        <div class="chat-list">
                                                            <a href="{% url 'adminmessagelist' chat.id %}" class="d-flex align-items-center">
                                                                <div class="flex-shrink-0">
                                                                    {% if chat.materialmanagerprofile.profile_picture.url != None%}
                                                                    <img src="{{ chat.materialmanagerprofile.profile_picture.url }}" alt="..." class="user-img"> 
                                                                    {% else %}
                                                                    <img src="https://bootstrapious.com/i/snippets/sn-v-nav/avatar.png" alt="..." class="user-img">
                                                                    {% endif %}
                                                                    
                                                                </div>
                                                                <div class="flex-grow-1 ms-3">
                                                                    <h3>{{chat.materialmanagerprofile.first_name}} {{chat.materialmanagerprofile.last_name}}</h3>
                                                                    <p>Material Manager</p>
                                                                </div>
                                                                {% if a != 0 %}
                                                                <div class= 'notification-badge'>{{a}}</div>
                                                                {% endif %}
                                                            </a>
                                                        </div>
                                                        {% endif %}
                                                        {% endfor%}
                                                        <!-- chat-list -->
                                                    </div>
                                                </div>
    
                                            </div>
                                            <!-- chat-list -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- chatlist -->

                            {%block messages %}
                            {% endblock %}
    
    
    
                    </div>
                </div>
            </div>
            </div>
        </section>
        <!-- char-area -->
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
{% endblock %}